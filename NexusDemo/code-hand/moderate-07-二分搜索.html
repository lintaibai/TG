<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>二分搜索</title>
</head>

<body>
    <script>
    /**
    //  * 1-基础迭代二分搜索
    //  * @param {Array} arr - 已排序的数组
    //  * @param {*} target - 要查找的目标元素
    //  * @return {number} 目标元素的索引，如果未找到则返回-1
    //  */
    // function binarySearch(arr,target){
    //     let left=0;
    //     let right=arr.length-1;
    //     while(left <= right){
    //         const mid=Math.floor((left+ right)/2);
    //         if(arr[mid]===target){
    //             return mid;// 找到目标，返回索引
    //         }else if(arr[mid]< target){
    //             left = mid +1; // 目标在右半部分
    //         }else{
    //             right =mid -1;  // 目标在左半部分
    //         }
    //     }
    //     return -1;
    // }


    /**
     * 优化后
     * @param {Array} arr - 已排序的数组
     * @param {*} target - 要查找的目标元素
     * @return {number} 目标元素的索引，如果未找到则返回-1
     * @throws {Error} 当输入不是数组或数组为空时抛出错误
     */
    function binarySearch(arr, target) {
        if (!Array.isArray(arr) || arr.length === 0) {
            throw new Error('输入必须是非空数组');
        }
        // 提前处理边界情况
        if (arr[0] === target) return 0;
        if (arr[arr.length - 1] === target) return arr.length - 1;
        let left = 0;
        let right = arr.length - 1;
        // 循环条件优化为 left < right
        while (left < right) {
            // 防止整数溢出的中间值计算
            const mid = left + Math.floor((right - left) / 2);

            if (arr[mid] < target) {
                left = mid + 1; // 目标在右半部分，排除mid
            } else {
                right = mid; // 目标在左半部分或mid就是目标
            }
        }
        // 循环结束后检查left位置是否为目标
        return arr[left] === target ? left : -1;
    }















    // 使用示例
    const sortedArray = [1, 3, 5, 7, 9, 11, 13, 15];
    console.log(binarySearch(sortedArray, 7)); // 输出: 3
    console.log(binarySearch(sortedArray, 8)); // 输出: -1
    </script>
</body>

</html>